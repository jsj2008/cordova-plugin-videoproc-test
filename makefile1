psrc=plugins/cordova-plugin-videoproc/src
pwww=plugins/cordova-plugin-videoproc/www

all: android browser ios

clean: 
	-rm -rf $(ANDROID_FILES) $(BROWSER_FILES) $(IOS_FILES)

#### android
ANDROID_FILES=platforms/android/src/com/oliveche/videoproc/VideoProc.java \
	platforms/android/assets/www/plugins/cordova-plugin-videoproc/www/videoproc.js \
	platforms/android/platform_www/plugins/cordova-plugin-videoproc/www/videoproc.js

android: $(ANDROID_FILES)

platforms/android/src/com/oliveche/videoproc/%: $(psrc)/android/%
	cp $< $@

platforms/android/assets/www/plugins/cordova-plugin-videoproc/www/%: $(pwww)/%
	tool/make_js.pl $< $@

platforms/android/platform_www/plugins/cordova-plugin-videoproc/www/%: $(pwww)/%
	tool/make_js.pl $< $@

#### browser

BROWSER_FILES: platforms/browser/www/plugins/cordova-plugin-videoproc/src/browser/VideoProcProxy.js \
	platforms/browser/www/plugins/cordova-plugin-videoproc/www/videoproc.js \
	platforms/browser/platform_www/plugins/cordova-plugin-videoproc/www/videoproc.js

browser: $(BROWSER_FILES)

platforms/browser/www/plugins/cordova-plugin-videoproc/src/browser/%: $(psrc)/browser/%
	tool/make_js.pl $< $@

platforms/browser/www/plugins/cordova-plugin-videoproc/www/%: $(pwww)/%
	tool/make_js.pl $< $@

platforms/browser/platform_www/plugins/cordova-plugin-videoproc/src/browser/%: $(psrc)/browser/%
	tool/make_js.pl $< $@

platforms/browser/platform_www/plugins/cordova-plugin-videoproc/www/%: $(pwww)/%
	tool/make_js.pl $< $@

#### ios

IOS_FILES=platforms/ios/HelloCordova/Plugins/cordova-plugin-videoproc/CDVVideoProc.m \
	platforms/ios/HelloCordova/Plugins/cordova-plugin-videoproc/CDVVideoProc.h \
	platforms/ios/www/plugins/cordova-plugin-videoproc/www/videoproc.js \
	platforms/ios/platform_www/plugins/cordova-plugin-videoproc/www/videoproc.js

ios: $(IOS_FILES)

platforms/ios/HelloCordova/Plugins/cordova-plugin-videoproc/%: $(psrc)/ios/%
	cp $< $@

platforms/ios/www/plugins/cordova-plugin-videoproc/www/%: $(pwww)/%
	tool/make_js.pl $< $@

platforms/ios/platform_www/plugins/cordova-plugin-videoproc/www/%: $(pwww)/%
	tool/make_js.pl $< $@

